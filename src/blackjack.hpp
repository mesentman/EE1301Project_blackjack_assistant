#ifndef BLACKJACK_HPP
#define BLACKJACK_HPP

#include <stdint.h>
enum Action { HIT, STAND, DOUBLE_DOWN, SPLIT };

// Player total from 0 to 21 (22 states)
// Usable ace 0 = no, 1 = yes (2 states)
// Dealer showing card from Ace to 10 (10 states)
// True count from -5 to +6 (12 states)
// clang-format off
const uint8_t blackjack_policy[22][2][10][12] = {
    // --- 0-3: Unused ---
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- 4: Hard 4 / Pair 2s ---
    // Pair 2s: Split(30) 2-7. Hit 8+.
    {{{30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}}, {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}}, 

    // --- 5,6,7: Hard 5,6,7 ---
    // Hard 5,7: Hit. 
    // Pair 3s (6): Split 2-7.
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}}, {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- 8: Hard 8 / Pair 4s ---
    // Pair 4s: Hit 2-4. Split(30) 5-6. Hit 7+.
    {{{0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {30,30,30,30,30,30,30,30,30,30,30,30}, {30,30,30,30,30,30,30,30,30,30,30,30}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}}, {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- 9: Hard 9 ---
    // DEVIATION: Double vs 2 if TC >= 1 (Idx 6+).
    // DEVIATION: Double vs 7 if TC >= 3 (Idx 8+).
    {{{0,0,0,0,0,0,2,2,2,2,2,2}, // D=2: Hit < 1, Double >= 1
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=3
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=4
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6
      {0,0,0,0,0,0,0,0,2,2,2,2}, // D=7: Hit < 3, Double >= 3
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=8
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=9
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=10
      {0,0,0,0,0,0,0,0,0,0,0,0}},// D=A
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- 10: Hard 10 ---
    // DEVIATION: Double vs 10 if TC >= 4 (Idx 9+).
    // DEVIATION: Double vs A  if TC >= 3 (Idx 8+).
    {{{2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=9
      {0,0,0,0,0,0,0,0,0,2,2,2}, // D=10: Hit < 4, Double >= 4
      {0,0,0,0,0,0,0,0,2,2,2,2}},// D=A: Hit < 3, Double >= 3
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- 11: Hard 11 ---
    // Double always (Standard).
    {{{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- 12: Hard 12 / Pair 6s ---
    // Pair 6s: Split 2-6. Hit 7+.
    // DEVIATION: Hard 12 vs 2: Stand if TC >= 3 (Idx 8+).
    // DEVIATION: Hard 12 vs 3: Stand if TC >= 2 (Idx 7+).
    // DEVIATION: Hard 12 vs 4: Hit if TC < 0 (Idx 0-4).
    {{{30,30,30,30,30,30,30,30,31,31,31,31}, // D=2: Hit < 3, Stand >= 3 (Pair=Split)
      {30,30,30,30,30,30,30,31,31,31,31,31}, // D=3: Hit < 2, Stand >= 2
      {30,30,30,30,30,31,31,31,31,31,31,31}, // D=4: Hit < 0, Stand >= 0
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=5
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 12 (Pair Aces): Always Split(30).
     {{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30}}},

    // --- 13: Hard 13 / Soft 13 ---
    // DEVIATION: Hard 13 vs 2: Stand if TC >= -1 (Idx 4+). Base=Stand. Hit only deep negative.
    {{{30,30,30,30,1,1,1,1,1,1,1,1}, // D=2 Hit if TC < -1
      {1,1,1,1,1,1,1,1,1,1,1,1},     // D=3
      {1,1,1,1,1,1,1,1,1,1,1,1},     // D=4
      {1,1,1,1,1,1,1,1,1,1,1,1},     // D=5
      {1,1,1,1,1,1,1,1,1,1,1,1},     // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0},     // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 13: Double 5,6
     {{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- 14: Hard 14 / Soft 14 ---
    {{{31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {30,30,30,30,30,30,30,30,30,30,30,30}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 14: Double 5,6
     {{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- 15: Hard 15 / Soft 15 ---
    // DEVIATION: Hard 15 vs 10: Stand if TC >= 4 (Idx 9+).
    // DEVIATION: Hard 15 vs A: Stand if TC >= 5 (Idx 10+).
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, // D=2
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=3
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=4
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=5
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=8
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=9
      {0,0,0,0,0,0,0,0,0,1,1,1}, // D=10 Hit < 4, Stand >= 4
      {0,0,0,0,0,0,0,0,0,0,1,1}},// D=A  Hit < 5, Stand >= 5
     // Soft 15: Double 4,5,6
     {{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- 16: Hard 16 / Soft 16 ---
    // Pair 8s: Always Split (31/30).
    // DEVIATION: Hard 16 vs 9: Stand if TC >= 4 (Idx 9+).
    // DEVIATION: Hard 16 vs 10: Stand if TC >= 0 (Idx 5+).
    // DEVIATION: Hard 16 vs A: Stand if TC >= 3 (Idx 8+).
    {{{31,31,31,31,31,31,31,31,31,31,31,31}, // D=2
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=3
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=4
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=5
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=6
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=7 (Hit)
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=8 (Hit)
      {30,30,30,30,30,30,30,30,30,31,31,31}, // D=9: Hit < 4, Stand >= 4
      {30,30,30,30,30,31,31,31,31,31,31,31}, // D=10: Hit < 0, Stand >= 0
      {30,30,30,30,30,30,30,30,31,31,31,31}},// D=A: Hit < 3, Stand >= 3
     // Soft 16: Double 4,5,6
     {{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- 17: Hard 17 / Soft 17 ---
    // Hard: Stand.
    // Soft: Double 3-6.
    {{{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1}},
     {{0,0,0,0,0,0,0,0,0,0,0,0},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{2,2,2,2,2,2,2,2,2,2,2,2},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- 18, 19, 20, 21: Mostly Stand (Standard) ---
    {{{31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {1,1,1,1,1,1,1,1,1,1,1,1}, {31,31,31,31,31,31,31,31,31,31,31,31}, {31,31,31,31,31,31,31,31,31,31,31,31}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}, {{2,2,2,2,2,2,2,2,2,2,2,2}, {2,2,2,2,2,2,2,2,2,2,2,2}, {2,2,2,2,2,2,2,2,2,2,2,2}, {2,2,2,2,2,2,2,2,2,2,2,2}, {2,2,2,2,2,2,2,2,2,2,2,2}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}, {0,0,0,0,0,0,0,0,0,0,0,0}}},
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}, {{1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {2,2,2,2,2,2,2,2,2,2,2,2}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}},
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}, {{1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}},
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}, {{1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}, {1,1,1,1,1,1,1,1,1,1,1,1}}}
};
#endif //Blackjack_HPP