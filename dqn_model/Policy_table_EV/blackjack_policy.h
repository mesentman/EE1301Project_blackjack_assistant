#ifndef BLACKJACK_POLICY_H
#define BLACKJACK_POLICY_H

#include <stdint.h>

// Dimensions:
// 1. Player Total: 0 to 21 (22 states)
// 2. Usable Ace: 0 = No, 1 = Yes (2 states)
// 3. Dealer Showing: 2 to Ace (10 states)
// 4. True Count: -5 to +6 (12 states)

/* Action Encoding:
   0 = HIT
   1 = STAND
   2 = DOUBLE
   30 = SPLIT
   31 = STAND (for pair/hard conflicts)
   32 = DOUBLE (for pair/hard conflicts)
*/

const uint8_t blackjack_policy[22][2][10][12] = {
    // --- INDEX 0, 1, 2, 3 (Impossible/Unused Totals) ---
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 4: Hard 4 / Pair 2s ---
    // Pair 2s: Split(30) vs 2-7. Hit(0) vs 8+.
    {{{30,30,30,30,30,30,30,30,30,30,30,30}, // D=2 (Split)
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=3
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=4
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=5
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=6
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=7 (Split)
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=8 (Hit)
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=9
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=10
      {0,0,0,0,0,0,0,0,0,0,0,0}},            // D=A
     // Soft 4 (N/A)
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}}, 

    // --- INDEX 5: Hard 5 ---
    // Always Hit.
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 6: Hard 6 / Pair 3s ---
    // Pair 3s: Split(30) vs 2-7. Hit(0) vs 8+.
    {{{30,30,30,30,30,30,30,30,30,30,30,30}, // D=2
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=3
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=4
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=5
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=6
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=8
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=9
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=10
      {0,0,0,0,0,0,0,0,0,0,0,0}},            // D=A
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 7: Hard 7 ---
    // Always Hit.
    {{{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}},
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 8: Hard 8 / Pair 4s ---
    // Pair 4s: Hit vs 2-4. Split(30) vs 5-6. Hit vs 7+.
    {{{0,0,0,0,0,0,0,0,0,0,0,0},             // D=2
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=3
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=4
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=5 (Split)
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=6 (Split)
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=8
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=9
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=10
      {0,0,0,0,0,0,0,0,0,0,0,0}},            // D=A
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 9: Hard 9 ---
    // Double(2) vs 3-6. Hit(0) else.
    {{{0,0,0,0,0,0,0,0,0,0,0,0},             // D=2
      {2,2,2,2,2,2,2,2,2,2,2,2},             // D=3
      {2,2,2,2,2,2,2,2,2,2,2,2},             // D=4
      {2,2,2,2,2,2,2,2,2,2,2,2},             // D=5
      {2,2,2,2,2,2,2,2,2,2,2,2},             // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=8
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=9
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=10
      {0,0,0,0,0,0,0,0,0,0,0,0}},            // D=A
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 10: Hard 10 ---
    // Double(2) vs 2-9. Hit(0) vs 10, A.
    {{{2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},             // D=9
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=10
      {0,0,0,0,0,0,0,0,0,0,0,0}},            // D=A
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 11: Hard 11 ---
    // Double(2) Always.
    {{{2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2},
      {2,2,2,2,2,2,2,2,2,2,2,2}},
     {{0},{0},{0},{0},{0},{0},{0},{0},{0},{0}}},

    // --- INDEX 12: Hard 12 / Pair 6s ---
    // Hard 12: Hit 2-3. Stand 4-6. Hit 7+.
    // Pair 6s: Split 2-6. Hit 7+.
    // Combined Logic:
    // D=2,3 -> Pair=Split/Hard=Hit -> 30
    // D=4,5,6 -> Pair=Split/Hard=Stand -> 31
    // D=7+ -> Pair=Hit/Hard=Hit -> 0
    {{{30,30,30,30,30,30,30,30,30,30,30,30}, // D=2
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=3
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=4
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=5
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 12 (Pair Aces): Always Split(30).
     {{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30},{30,30,30,30,30,30,30,30,30,30,30,30}}},

    // --- INDEX 13: Hard 13 / Soft 13 (A,2) ---
    // Hard: Stand 2-6. Hit 7+.
    // Soft: Double 5-6. Hit else.
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, // D=2
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=3
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=4
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=5
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 13 (A,2)
     {{0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5 Double
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6 Double
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- INDEX 14: Hard 14 / Pair 7s / Soft 14 (A,3) ---
    // Pair 7s: Split 2-7. Hit 8+.
    // Hard 14: Stand 2-6. Hit 7+.
    // Soft 14: Double 5-6.
    {{{31,31,31,31,31,31,31,31,31,31,31,31}, // D=2 (Split/Stand)
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=3
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=4
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=5
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=6
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=7 (Split/Hit)
      {0,0,0,0,0,0,0,0,0,0,0,0},             // D=8
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 14 (A,3)
     {{0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5 Double
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6 Double
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- INDEX 15: Hard 15 / Soft 15 (A,4) ---
    // Hard: Stand 2-6. Hit 7+.
    // Soft: Double 4-6.
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, // D=2
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=7
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}},
     // Soft 15 (A,4)
     {{0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=4 Double
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5 Double
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6 Double
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- INDEX 16: Hard 16 / Pair 8s / Soft 16 (A,5) ---
    // Pair 8s: Always Split.
    // Hard 16: Stand 2-6. Hit 7+.
    // Soft 16: Double 4-6.
    {{{31,31,31,31,31,31,31,31,31,31,31,31}, // D=2 (Split/Stand)
      {31,31,31,31,31,31,31,31,31,31,31,31},
      {31,31,31,31,31,31,31,31,31,31,31,31},
      {31,31,31,31,31,31,31,31,31,31,31,31},
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=6
      {30,30,30,30,30,30,30,30,30,30,30,30}, // D=7 (Split/Hit)
      {30,30,30,30,30,30,30,30,30,30,30,30},
      {30,30,30,30,30,30,30,30,30,30,30,30},
      {30,30,30,30,30,30,30,30,30,30,30,30},
      {30,30,30,30,30,30,30,30,30,30,30,30}},
     // Soft 16 (A,5)
     {{0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=4
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- INDEX 17: Hard 17 / Soft 17 (A,6) ---
    // Hard: Stand.
    // Soft: Double 3-6.
    {{{1,1,1,1,1,1,1,1,1,1,1,1}, // D=2
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1}},
     // Soft 17 (A,6)
     {{0,0,0,0,0,0,0,0,0,0,0,0},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=3
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=4
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0},
      {0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- INDEX 18: Hard 18 / Pair 9s / Soft 18 (A,7) ---
    // Pair 9s: Split 2-6, 8-9. Stand 7, 10, A.
    // Hard 18: Stand.
    // Soft 18: Double 2-6. Stand 7-8. Hit 9-A.
    {{{31,31,31,31,31,31,31,31,31,31,31,31}, // D=2 (Split/Stand)
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=3
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=4
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=5
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=6
      {1,1,1,1,1,1,1,1,1,1,1,1},             // D=7 (Stand)
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=8 (Split/Stand)
      {31,31,31,31,31,31,31,31,31,31,31,31}, // D=9
      {1,1,1,1,1,1,1,1,1,1,1,1},             // D=10 (Stand)
      {1,1,1,1,1,1,1,1,1,1,1,1}},            // D=A
     // Soft 18 (A,7)
     {{2,2,2,2,2,2,2,2,2,2,2,2}, // D=2
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=3
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=4
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=5
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=7 Stand
      {1,1,1,1,1,1,1,1,1,1,1,1}, // D=8 Stand
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=9 Hit
      {0,0,0,0,0,0,0,0,0,0,0,0}, // D=10 Hit
      {0,0,0,0,0,0,0,0,0,0,0,0}}},

    // --- INDEX 19: Hard 19 / Soft 19 (A,8) ---
    // Hard: Stand.
    // Soft: Double vs 6. Stand else.
    {{{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1}},
     // Soft 19
     {{1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {2,2,2,2,2,2,2,2,2,2,2,2}, // D=6 Double
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1},
      {1,1,1,1,1,1,1,1,1,1,1,1}}},

    // --- INDEX 20: Hard 20 / Soft 20 ---
    // Always Stand.
    {{{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1}},
     {{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1}}},

    // --- INDEX 21: Hard 21 / Soft 21 ---
    // Always Stand.
    {{{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1}},
     {{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1},{1,1,1,1,1,1,1,1,1,1,1,1}}}
};

#endif // BLACKJACK_POLICY_H